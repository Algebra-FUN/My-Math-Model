## 道路抗阻分批配流算法

### 相关定义与概念

#### 道路抗阻公式

$$
T=T_0(1+\alpha(\frac QC)^{\beta})
$$

符号含义

| 符号       | 类型          | 含义                   |
| ---------- | ------------- | ---------------------- |
| T          | 邻接矩阵/变量 | 实际通过时间的邻接矩阵 |
| $$T_0$$    | 邻接矩阵/常量 | 自由流时间的邻接矩阵   |
| Q          | 邻接矩阵/变量 | 交通流量的邻接矩阵     |
| C          | 邻接矩阵/常量 | 路段的实际基础通行能力 |
| $$\alpha$$ | 常数/1        |                        |
| $$\beta$$  | 常数/0.5      |                        |

#### O-D矩阵

| 符号 | 类型          | 含义                            |
| ---- | ------------- | ------------------------------- |
| OD   | 邻接矩阵/常量 | origin到destination之间的总流量 |

#### 最短路矩阵

| 符号 | 类型          | 含义                       |
| ---- | ------------- | -------------------------- |
| P    | 邻接矩阵/变量 | 贮存最短路径元组的邻接矩阵 |

### 算法

#### step1

初始化，令$$T=T_0，Q=O$$

#### step2

根据T，用Floyd算法求出两点之间的最短路径矩阵P

#### step3

将$$\frac{OD}n$$的流量按最短路径矩阵P进行分配，更新交通流量矩阵Q

#### step4

按照Q，根据公式，更新T

重复2-4，共n次，将全部OD矩阵流量分配

### 一些评价指标

#### 路网拥堵指数（道路抗阻系数）

$$
J = \alpha(\frac QC)^{\beta}
$$

> 这里J也是邻接矩阵

取平均值
$$
\bar J = \frac{\sum_i^n\sum_j^nJ_{ij}}{n^2}
$$

#### 加权路网通行时耗

$$
QT = \sum_i^n\sum_j^nQ_{ij}\cdot T_{ij}
$$

#### 平均道路通行时间

$$
T=\frac{\sum_i^n\sum_j^nT_{ij}}{n^2}
$$

